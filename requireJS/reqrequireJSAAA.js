/*require*/
var Yeffect={require:function (BasicsUrl,debug) {var saveDefineCall=false;/*****临时保存载入函数的方法******/var saveKeyAndFn={};/*******保存所有在入的方法与url的key对应********/var firstFn=false;/****自动调用的入口函数****/var loadlength=0;/****需要引入js的数量****/BasicsUrl=BasicsUrl||'';/****基础路劲****/var treeInfo={};/**保存数结构***/var treeParent=false;/***临时保存当前结构树对象****/debug=debug||false;/****是否开启debug模式****/function setURlstr(s) {var bascop=BasicsUrl;var basFir='';if(bascop.length>0){if(bascop.substr(0,1)=='/'){basFir='/';bascop=bascop.substr(1,bascop.length-1)}};if(bascop.length>1){if(bascop.substr(0,2)=='./'){bascop=bascop.substr(2,bascop.length-2)}};var b=bascop;var s1=s.substr(0,1);var s2=s.substr(0,2);var s3=s.split('../');if(s.indexOf('https://')>-1 || s.indexOf('http://')>-1){b='';}else if(s1=='/'){b='';}else if(s2=='./'){s=s.split('./')[1];}else if(s3.length>1){var sg=s.split('../');var sgl=sg.length-1;var bg=bascop.split('../');var bgl=bg.length-1;var blast=bg[bg.length-1];var blastA=blast.split('/');var blastAl=blastA.length-1;if(blastAl>sgl){var bsx=basFir;for(var j=0;j<bgl;j++){bsx+='../';};b=bsx+blastA.splice(0,blastAl-sgl).join('/')+'/';s=sg[sg.length-1];}else{var cl=sgl-blastAl+bgl;var bs='';for(var i=0;i<cl;i++){bs+='../';};b=basFir+bs;if(basFir=='/' && cl>0){b='/';};s=sg[sg.length-1];}};return b+s;};/*****转化结构树函数*****/function treeTostring() {var logtree='';function eh(tree,tab) {var log='\n';for(var k in tree){log+=tab;log+=k;log+=eh(tree[k],tab+'　　')};return log;};logtree=eh(treeInfo,'');return logtree;};function geturlrequire(s,f,p) {if(!p){p=f;f='';};var url=s;if(f==''){if(s.length>3){if(s.substr(s.length-3,s.length)!='.js'){url=s+'.js';}}else{url=s+'.js';}}else{url=s+'.'+f;};var key=url;/***保存对象树key名***/url=setURlstr(url);if(saveKeyAndFn[url]){loadlength--;if(loadlength==0){actionfirst();/***加载完成进入程序***/};return;};var script=document.createElement("script");saveDefineCall=false;saveKeyAndFn[url]='待加载文件...';script.onload=function () {if(saveDefineCall){saveKeyAndFn[url]=saveDefineCall;if(treeParent){p[key]=treeParent;}else{p[key]=false;};saveDefineCall=false;};document.head.removeChild(script);loadlength--;if(loadlength==0){actionfirst();/***加载完成进入程序***/}};script.onerror=function () {saveKeyAndFn[url]=false;p[key]={};document.head.removeChild(script);loadlength--;if(loadlength==0){actionfirst();/***加载完成进入程序***/};if(debug){console.log('%c有JS加载失败请注意报错信息,当前结构树为 ', 'background-image:-webkit-gradient( linear, left top, right top, color-stop(0, #f22), color-stop(0.15, #f2f), color-stop(0.3, #22f), color-stop(0.45, #2ff), color-stop(0.6, #2f2),color-stop(0.75, #2f2), color-stop(0.9, #ff2), color-stop(1, #f22) );color:transparent;-webkit-background-clip: text;font-size:30px;');var treeStr = treeTostring();console.log('%c' + treeStr, 'background:#ff0;font-size:20px; color:#000;');throw key+'文件载入出错请仔细检查!';}};document.head.appendChild(script);script.src=url;};function requireurl(fns,parent) {var reg=/\brequire\(.*\)/g;var result='';while ((result = reg.exec(fns)) != null){loadlength++;eval('geturl'+result[0].split(')')[0]+',parent)');/***获取单个url****/}};function actionfirst() {firstFn();/***没有需要加载项目直接进入程序***/if(debug) {var treeStr = treeTostring();console.log('%cRequire结构树为：', 'font-size:20px;font-weight: bold; color:#03f;');console.log('%c' + treeStr, 'background:#ff0;font-size:20px; color:#000;')}};function define(fn) {if(fn && fn.constructor!=Function){treeParent={};saveDefineCall={fn:function () {return fn;},exports:{}};return;};/***处理参数***/var fns=fn.toString();var loaders=[];var rNote = /(\/\/.*\brequire\b.*[\r\n])|(\/\*(.|\s)*?\*\/)/g; /**匹配单行或多行注释**/fns=fns.replace(rNote,"");if(!firstFn){var href=window.location.href.split('/')};treeParent={};requireurl(fns,treeParent);/****载入依赖******//******注入exports******/var exports={};fns=fns.substr(0,fns.length-1)+';return exports;}';var fn1=eval('('+fns+')');if(!firstFn){treeInfo['入口文件']=treeParent;/***设置更节点****/firstFn=fn1;/****设置入口函数***/if(loadlength==0){actionfirst();/***没有需要加载项目直接进入程序***/}}else{saveDefineCall={fn:fn1,exports:exports}};};function require(s,f) {var url=s;if(!f || f==''){if(s.length>3){if(s.substr(s.length-3,s.length)!='.js'){url=s+'.js';}}else{url=s+'.js';}}else{url=s+'.'+f;};url=setURlstr(url);var fncontent=saveKeyAndFn[url]||{fn:{},exports:{}};var fn=fncontent.fn;if(fn){if(fn.constructor==Function){var fncall=fn();saveKeyAndFn[url]={fn:fncall,exports:{}};return fncall;};return fn;}else{var errData={fn:{},exports:{}};saveKeyAndFn[url]={fn:{},exports:{}};return errData.fn;}};return define;}};